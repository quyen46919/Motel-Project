CREATE DATABASE MOTEL_PROJECT
USE MOTEL_PROJECT

-- CREATE ALL TABLES
-- CREATE TABLES FOR USER/USER ACCOUNT
CREATE TABLE PERSON(
	IdPerson VARCHAR(50) PRIMARY KEY,
	FirstName NVARCHAR(30) NOT NULL,
	LastName NVARCHAR(30) NOT NULL,
	PhoneNumber VARCHAR(11) NOT NULL,
	Address NVARCHAR(200) NOT NULL,
	Sex CHAR(1) DEFAULT 1,
	Avatar VARBINARY(MAX),
)
DROP TABLE PERSON
INSERT INTO PERSON VALUES ('U001', N'Nguyễn Châu', N'Quyền', '0343547418', N'K544/16đường2-9', 1, NULL),
						  ('U002', N'Nguyễn Châu', N'Phát', '0378509830', N'K544/16 đường 2-9', 1, NULL),
						  ('U003', N'Ngô Thị Bích', N'Vân', '0351112323', N'K544/8 đường 2-9', 2, NULL),
						  ('U004', N'Hoàng Hữu', N'Tài', '0978787727', N'121 Trưng Nữ Vương', 1, NULL),
						  ('U005', N'Trần Vũ Anh', N'Thư', '093881928', N'54 Trần Phú', 2, NULL),
						  ('U006', N'Hoàng Hữu', N'Nghĩa', '033221231', N'200 Tố Hữu', 1, NULL),
						  ('U007', N'Hường Thị Bích', N'Thủy', '0317271882', N'22 Tiên Sơn 14', 2, NULL),
						  ('U008', N'Lưu', N'Linh', '0982281228', N'414 Núi Thành',2, NULL),
						  ('U009', N'Phạm Hồng', N'Phúc', '0987772192', N'20 Hùng Vương', 1, NULL),
						  ('U010', N'Phạm Minh', N'Sang', '096676281', N'78 Cách Mạng Tháng Tám',1, NULL)
SELECT * FROM PERSON



CREATE TABLE ROLE(
	IdRole VARCHAR(50) PRIMARY KEY,
	RoleName NVARCHAR(50) NOT NULL,
	Active BIT NOT NULL,
)
DROP TABLE ROLE
INSERT INTO ROLE VALUES ('R1', 'Admin', 1),
						('R2', 'Tenent', 1),
						('R3', 'HouseHolder', 1),
SELECT * FROM ROLE



CREATE TABLE ACCOUNT(
	Account NVARCHAR(30),
	Password NVARCHAR(30),
	IdRole VARCHAR(50) FOREIGN KEY REFERENCES ROLE(IdRole),
	IdPerson VARCHAR(50) FOREIGN KEY REFERENCES PERSON(IdPerson),
	Active BIT NOT NULL,
	CONSTRAINT PK_ACCOUNT PRIMARY KEY (Account, Password)
)
DROP TABLE ACCOUNT
INSERT INTO ACCOUNT VALUES ('admin','admin123','R1','U001',1),
	('huutai','huutai123','R2','U004',1),
	('huunghia','huunghia123','R2','U006',1),
	('anhthu','anhthu123','R3','U005',1)
SELECT * FROM ACCOUNT
GO

-- CREATE TABLES FOR MOTEL/MOTEL ROOM
CREATE TABLE FORMALITY (
	IdFormality VARCHAR(2) PRIMARY KEY,
	FormalityName NVARCHAR(50),
)
DROP TABLE FORMALITY
INSERT INTO FORMALITY VALUES ('F1', N'Không chung chủ'),
							('F2', N'Chung chủ'),
							('F3', N'Căn hộ')
SELECT * FROM FORMAITY

CREATE TABLE MOTEL (
	IdMotel VARCHAR(6) PRIMARY KEY,
	HomeNumber VARCHAR(30),
	Street NVARCHAR(100),
	District NVARCHAR(100),
	City NVARCHAR(100),
	IdBoss NVARCHAR(50),
	IdKey NVARCHAR(50),
	IdFormality VARCHAR(2) FOREIGN KEY REFERENCES FORMALITY(IdFormality),
	BikePark BIT NOT NULL,
	Camera BIT NOT NULL,
	DryingGround BIT NOT NULL,
	MapIframe NVARCHAR(200),
)
DROP TABLE MOTEL
INSERT INTO MOTEL VALUES 
		('TRO001','K544/16', N'2 THÁNG 9',N'HẢI CHÂU',N'ĐÀ NẴNG', NULL,'U002','F1',1,1,1,NULL),
		('TRO002','K76/8',N'TRẦN PHÚ',N'HẢI CHÂU',N'ĐÀ NẴNG','U005',NULL,'F1',1,1,1,NULL)
SELECT * FROM MOTEL

CREATE TABLE MOTELREQUIRE(
	IdMotel VARCHAR(6) PRIMARY KEY REFERENCES MOTEL(IdMotel),
	FemaleOnly BIT NOT NULL,
	SplitMaleAndFemale BIT NOT NULL,
	Deposit BIT NOT NULL,
	CookingInRoom BIT NOT NULL,
	NoDrink BIT NOT NULL,
	DontMakeNoiseAfter23h BIT NOT NULL,
	InviteFriendsOverNight BIT NOT NULL,
)
DROP TABLE MOTELREQUIRE
INSERT INTO MOTELREQUIRE VALUES ('TRO001',0,1,1,1,1,1,1),('TRO002',0,1,1,1,1,1,1)
SELECT * FROM MOTELREQUIRE


CREATE TABLE MOTELROOM(
	IdMotel VARCHAR(6) FOREIGN KEY REFERENCES MOTEL(IdMotel),
	IdMotelRoom nvarchar(50) PRIMARY KEY,
	Prices INT CHECK (Prices >= 0),
	Acreage INT CHECK (Acreage >= 0),
	Mezzanine BIT NOT NULL,
	MezzanineArea INT CHECK (MezzanineArea >= 0),
	WaterPrices INT CHECK (WaterPrices >= 0),
	ElecPrices INT CHECK (ElecPrices >= 0),
	SameRoom INT,
	Active BIT NOT NULL,
)

DROP TABLE MOTELROOM
INSERT INTO MOTELROOM VALUES ('TRO001','MR001',2500000,25,0,0,3000,7000,0,1),
							('TRO001','MR002',2500000,30,1,25,3000,7000,0,1),
							('TRO002','MR003',2100000,28,1,15,3500,7000,0,1),
							('TRO001','MR004',1800000,29,0,0,3500,7000,0,1),
							('TRO002','MR005',1400000,15,0,0,3000,7000,0,1)

CREATE TABLE ROOMDETAILS (
	IdMotelRoom NVARCHAR(50) FOREIGN KEY REFERENCES MOTELROOM(IdMotelRoom),
	Kitchen BIT NOT NULL,
	Fan BIT NOT NULL,
	AirCondition BIT NOT NULL,
	Wifi BIT NOT NULL,
	WaterHeater BIT NOT NULL,
	PersonalToilet BIT NOT NULL,
	TrashCan BIT NOT NULL,
	Img1 NVARCHAR(200),
	Img2 NVARCHAR(200),
	Img3 NVARCHAR(200),
)
DROP TABLE ROOMDETAILS
INSERT INTO ROOMDETAILS VALUES ('MR001',1,1,0,1,0,1,1,NULL,NULL,NULL)




